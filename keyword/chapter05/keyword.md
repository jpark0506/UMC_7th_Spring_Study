# Domain
## 정의
- 소프트웨어 개발에서 "도메인"은 애플리케이션이 해결하려고 하는 특정 비즈니스나 지식 영역을 뜻함.
EX) 전자상거래 도메인은 판매, 재고, 고객 관리를 포함할 수 있습니다.
## 속성
- 도메인은 엔티티, 값 객체, 서비스와 같은 개념으로 구성
## 개념
### 1. 엔티티 (Entity)
- 정의: 엔티티는 도메인에서 고유하게 식별되는 객체로, 특정 속성을 가지며 생애 주기를 지니는 객체
- 예시: 예를 들어, 전자상거래 시스템에서 User나 Product가 엔티티가 될 수 있습니다. 각 User는 고유한 ID로 구분되며, 이름, 이메일 같은 속성을 가짐
- 특징: 엔티티는 고유 식별자를 통해 동일성을 판단함(PK) 같은 데이터를 가지더라도 식별자가 다르면 다른 객체로 취급
### 2. 값 객체 (Value Object)
- 정의: 값 객체는 식별자 없이 값으로만 동일성을 판단하는 객체. 주로 불변(immutable) 특성을 가지며, 엔티티의 속성을 나타내는 데 사용됨.
- 예시: 예를 들어, Address는 값 객체가 될 수 있다. 여러 User가 같은 Address를 가질 수 있으며, 주소가 같은 두 객체는 같은 객체로 취급됩니다.
- 특징: 값 객체는 불변성(Immutable)으로 설계되는 것이 일반적이며, 재사용되거나 중복될 수 있음.
### 3. 서비스 (Service)
- 정의: 서비스는 엔티티와 값 객체에 속하지 않는 비즈니스 로직을 수행하는 객체. 복잡한 로직이나 도메인 모델 간의 상호작용이 필요할 때 주로 사용됨.
- 예시: 전자상거래 시스템에서 PaymentService는 결제 로직을 담당할 수 있음. 이 서비스는 Order나 User 엔티티와 상호작용하여 결제를 처리하게 됨.
- 특징: 서비스는 상태를 가지지 않고 비즈니스 로직만 포함한다. 
- 역할: 서비스는 복잡한 비즈니스 로직을 분리하여 코드의 응집도를 높이고, 도메인 객체가 각자의 역할에 집중할 수 있게 도움.
### 4. 리포지토리 (Repository)
- 정의: 리포지토리는 도메인 객체와 데이터베이스 간의 중간층으로, 도메인 객체를 저장하고 조회하는 역할을 수행함.
- 예시: UserRepository는 데이터베이스에서 User 엔티티를 생성, 조회, 업데이트, 삭제하는 메서드를 제공함.
- 특징: 리포지토리는 데이터 접근 로직을 도메인 로직과 분리하여, 도메인 객체가 데이터베이스 구현에 종속되지 않도록 만듦. 인터페이스로 정의된 경우가 많으며, 다양한 데이터 소스를 지원할 수 있음.
- 역할: 리포지토리는 도메인 계층과 데이터 접근 계층을 연결해주는 역할을 하여, 비즈니스 로직이 데이터 저장 방식에 의존하지 않고 도메인 로직에 집중할 수 있게 한다.

# 양방향 매핑 (Bidirectional Mapping)
## 정의
양방향 매핑은 엔티티 간의 관계에서 서로의 정보를 참조할 수 있게 양쪽에 매핑을 설정하는 방법입니다.

## 속성
@OneToMany, @ManyToOne, @OneToOne, @ManyToMany Annotation으로 구현됨.

## 단점
순환 참조로 인한 무한 루프 발생 가능성, N + 1 문제를 유발할 수 있는 가능성이 높음.

# N + 1 문제
## 정의
N + 1 문제는 엔티티를 조회할 때 발생하는 성능 문제로, 주 엔티티 하나를 조회할 때 그와 연관된 서브 엔티티들을 각각의 쿼리로 조회하는 경우에 발생함.
## 발생하는 경우
User 엔티티와 Post 엔티티가 양방향 매핑된 경우, User 1개를 조회하고 해당 User에 연결된 여러 Post를 조회할 때 User를 가져오기 위한 쿼리 1번과 각 Post에 대한 쿼리 N번이 실행됨.
# 해결 방법
- FetchType 설정 최적화
- 페치 조인(Fetch Join) 활용
- @EntityGraph 어노테이션 사용
- @BatchSize 어노테이션 사용